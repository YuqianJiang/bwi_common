<launch>

  <arg name="multimap_file" default="$(find utexas_gdc)/maps/simulation/multimap/test.yaml" />

  <!-- launch the multi map server for the simulated world
  <node name="multi_level_map_server" pkg="multi_level_map_server" type="multi_level_map_server">
    <param name="map_file" value="$(arg multimap_file)" />
  </node>  -->

  <!-- start the simulation environment -->
    <arg name="use_sim_time" default="true" />
    <arg name="gui" default="true" />
    <arg name="world" default="gazebo" />
    <arg name="debug" default="false" />

    <arg unless="$(arg debug)" name="gazebo_binary" value="gzserver" />
    <arg if="$(arg debug)" name="gazebo_binary" value="debug" />

    <!-- set use_sim_time flag -->
    <group if="$(arg use_sim_time)">
      <param name="/use_sim_time" value="true" />
    </group>

    <!-- start world -->
    <node name="$(arg world)" pkg="gazebo_ros" type="$(arg gazebo_binary)" args="$(find segbot_gazebo)/worlds/segbot_test_world.world" respawn="false" output="screen" launch-prefix="$(optenv OPTIRUN_LAUNCH_PREFIX)" />

    <!-- start gui -->
    <group if="$(arg gui)">
      <node name="gazebo_gui" pkg="gazebo_ros" type="gzclient" respawn="false" output="screen" launch-prefix="$(optenv OPTIRUN_LAUNCH_PREFIX)" />
    </group>

  <!-- Add simulation helpers for opening and closing doors, and teleporting the robot through elevators.  -->
  <include file="$(find segbot_simulation_apps)/launch/door_handler.launch" />
  <node name="robot_teleporter" pkg="segbot_simulation_apps" type="robot_teleporter">
    <param name="robotid" value="segbot" />
  </node>

  <include file="$(find collect_gazebo_data)/launch/includes/simulation.launch.xml">
    <arg name="x" value="0.0" />
    <arg name="y" value="10.0" />
  </include>

</launch>
